<!DOCTYPE html>
<html>
  <head lang="zh">
    <meta charset="utf-8" />
    <link rel="preload" as="fetch" href="/touhou.json" crossOrigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Touhou Project characters ranked by overall popularity" />
    <script defer src="/chart.umd.js"></script>
    <script defer src="/mustache.js"></script>
    <script defer src="/index.js"></script>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100vh;
      }
      #tooltip > div {
        display: flex;
        flex-direction: row;
        border-style: solid;
        border-width: 5px;
        padding: 4px;
        width: fit-content;
        gap: 6px;
      }
      #tooltip .desc {
        display: flex;
        flex-direction: column;
        width: max-content;
        min-width: fit-content;
      }
      #tooltip .desc .fill {
        flex: 1;
      }
      #tooltip .desc a {
        all: unset;
        font-size: 8px;
        cursor: pointer;
        align-self: flex-end;
      }
      #tooltip img {
        filter: drop-shadow(3px 0 0 white)
          drop-shadow(0 3px 0 white)
          drop-shadow(-3px 0 0 white)
          drop-shadow(0 -3px 0 white);
        width: 100px;
        height: 100px;
      }
      #tooltip .nm-lg {
        font-size: 1.8em;
      }
      #tooltip .nm-md {
        font-size: 1.5em;
      }
      #tooltip .nm-sm {
        font-size: 1.2em;
      }
    </style>
  </head>
  <body>
    <canvas id="chart"></canvas>
    <div id="tooltip"></div>
    <template id="tooltip-tmpl">
      {{#title}}
      <span>{{.}}</span>
      {{/title}}
      {{#body}}
      <div style="{{style}}">
        <img src="{{url}}">
        <div class="desc">
          <span class="{{cls}}">{{label}}</span>
          <span>{{gm}}{{#stage}}{{stage}}面{{/stage}}</span>
          <span>平均人气：{{v}}</span>
          <span class="fill"></span>
          <a href="https://weibo.com/u/1147272555">立绘：@忍忍_ninnin</a>
        </div>
      </div>
      {{/body}}
    </template>
  </body>
</html>
